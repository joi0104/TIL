## 쿠키와 세션



### 쿠키와 세션을 사용하는 이유

- HTTP 프로토콜의 특징인 connectionless, stateless 때문에 클라이언트에 대한 인증을 유지하기가 어렵다.
- connectionless : 클라이언트가 요청을 한 후 응답을 받으면 그 연결을 끊어버리는 특징
- stateless : 통신이 끝나면 상태를 유지하지 않는 특징

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FbetTb6%2FbtqxVesqYq0%2FsUO2b5dpKqVuR261lNZBKk%2Fimg.png)



### 쿠키

- 브라우저(클라이언트) 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일이다.
- **사용자의 상태 정보를 로컬**에 저장했다가 참조한다.
- 사용자 인증이 **유효한 시간**을 명시할 수 있으며, 유효시간이 정해지면 브라우저가 종료되어도 인증이 유지될 수 있다.
- 따로 요청하지 않아도 브라우저가 Request시 request header에 넣어서 자동으로  서버에 전송한다.



#### 쿠키의 동작방식

- 클라리언트가 서버에 접속시 서버에서 쿠키를 생성 후 HTTP 헤더에 쿠키를 포함시켜서 응답.
- 클라이언트가 서버에 요청할 때, HTTP 헤더에 쿠키를 함께 보냄.
- 서버는 HTTP 헤더의 쿠키를 읽고 이전 상태 정보를 변경 할 필요가 있을 때 쿠키를 업데이트 하여 변경된 쿠키를 HTTP 헤더에 포함시켜서 응답.



### 세션

- 쿠키와 매우 유사하지만,  **사용자 상태 정보가 서버측에서 저장 및 관리**된다.
- 서버에서는 클라이언트를 구분하기 위해서 **세션ID**를 부여한다.
- 브라우저가 서버에 접속해서 **브라우저를 종료할 때까지** 인증 상태를 유지한다.

#### 세션의 동작 방식

- 클라이언트가 서버에 접속시 세션 ID를 발급받음.
- 클라이언트는 세션 ID를 쿠키를 통해서 저장.
- 클라이언트는 서버에 요청할 때, 이 쿠키의 세션 ID를 서버에 전달
- 서버는 세션 ID를 전달 받아서 세션ID로 세션에 있는 클라이언트의 정보를 가져옴
- 클라이언트 정보를 가지고 서버를 요청을 처리하여 클라이언트에 응답



### 쿠키와 세션의 차이

- 쿠키와 세션은 비슷한 역할을 하며, 동작원리도 비슷하다. 그 이유는 세션도 결국 쿠키를 사용하기 때문이다.
-   사용자에 대한 정보를 서버에 두기 때문에 쿠키보다 보안에 좋지만, 사용자가 많아질수록 서버 메모리를 많이 차지하게 된다.

-  즉 동접자 수가 많은 웹 사이트인 경우,  서버에 과부하를 주게 되므로 성능 저하의 요인이 된다.



출처 <https://interconnection.tistory.com/74>