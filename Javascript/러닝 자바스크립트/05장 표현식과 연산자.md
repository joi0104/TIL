## 	5장 표현식과 연산자



### 표현식

- 값으로 평가될 수 있는 문
- 어떤 행동을 하고 그 결과를 명시적으로 반환하는 문
- 연산자 표현식, 식별자 표현식, 리터럴 표현식이 존재



### 연산자

- 값을 만드는 행동

  

### 연산자 우선순위

- [연산자 우선순위 표](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/%EC%97%B0%EC%82%B0%EC%9E%90_%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84)

- 우선순위가 같은 연산자들은 오른쪽에서 왼쪽, 왼쪽에서 오른쪽으로 평가한다.
- 따라서 여러 연산자가 섞여있을 경우, 괄호를 사용하여 우선순위를 명시한다.



### 산술 연산자

- 단항부정과 뺄셈중에 단항부정이 우선순위가 높다. (단항 플러스와 덧셈도 마찬가지)
- 전위 연산은 변수의 값을 바꾼 뒤에 평가, 후위 연산은 변수의 값을 평가한 뒤에 바꾼다.

| 연산자 | 설명                         | 예제          |
| ------ | ---------------------------- | ------------- |
| +      | 덧셈(문자열 병합에도 쓰인다) | 3+2 //5       |
| -      | 뺄셈                         | 3-2 //1       |
| /      | 나눗셈                       | 3/2 //1.5     |
| *      | 곱셈                         | 3*2 //6       |
| %      | 나머지                       | 3%2  //1      |
| -      | 단항 부정                    | -x //-50      |
| +      | 단항 플러스                  | +x //50       |
| ++     | 전위/후위 증가               | ++x, x++ //51 |
| --     | 전위/후위 감소               | --x, x-- //51 |

- 문자열 병합

  - 자바스크립트에서 `+` 연산자는 덧셈과 문자열 병합에 모두 사용된다.

  - 피연산자 중 하나라도 문자열이면 문자열 병합을 수행한다. `문자열 병합 > 덧셈`

    

### 비교 연산자

- `null` `undefined` `빈 문자열` `0` 때문에 동등연산자는 많은 부작용을 낳을 수 있다. 따라서, 문자열은 미리 숫자로 변환해서 일치하는지 비교하는 것을 권한다.

| 연산자 | 설명                                | 예제            |
| ------ | ----------------------------------- | --------------- |
| ==     | 두 값이 같음 (동등 연산자)          | 5=="5" //true   |
| ===    | 두 값과 타입 모두 같음(일치 연산자) | 5==="5" //false |
| !=     | 두 값이 같지 않음                   | 5!="5" //false  |
| !==    | 두 값과 타입 모두 같지 않음         | 5!=="5" //true  |
| &#62;  | 보다 큰                             | 5>6 //false     |
| <      | 보다 작은                           | 5<6 //true      |
| &#62;= | 보다 크거나 같은                    | 5>=6 //false    |
| <=     | 보다 크거나 작은                    | 5<=6 //ture     |

- 숫자 비교

  - `NaN === NaN` 와 `NaN == NaN` 모두 `false` 이므로 숫자가 `NaN` 인지 알아보려면 내장된 `isNaN` 함수를 사용해야 한다.

  - 소수점이 있는 숫자를 비교할 떄는 관계 연산자를 써서 숫자가 대상숫자에 충분히 가까운지 확인하는 편이 좋다.

```js
let n = 0;
while(true) {
  n += 0.1;
  if(Math.abs(n - 0.3) < Number.EPSILON) break;
}
console.log(n)
```



### 논리 연산자

- 자바스크립트의 논리 연산자는 불리언이 아닌 값도 다룰 수 있고, 불리언이 아닌 값을 반환하기도 한다.
- `false`로 인식하는 `거짓 같은 값` 과 `true` 로 인식하는 `참 값은 값` 이 존재한다.

- 거짓 같은 값: `undefined` `null`  `0` `NaN` `''`
- 참 같은 값: `거짓 같은 값` 이외의 모든 값. 빈 배열과 빈 객체 또한 포함된다.
- `XOR` 연산은 존재하지 않으므로 `(x||y) && (x!==y)`  를 사용한다.
- `단축 평가` : 논리 연산자에서 뒤의 값을 평가할 필요가 없는 경우 뒤에 값을 평가하지 않고 결과를 리턴하는 특징. (두번째 피연산자의 부수효과를 무시한다.)

| x            | y            | x&&y  | x\|\|y | !x    |
| ------------ | ------------ | ----- | ------ | ----- |
| false        | false        | false | false  | true  |
| false        | true         | false | true   | true  |
| true         | false        | false | true   | false |
| true         | true         | true  | true   | false |
| 거짓 같은 값 | 거짓 같은 값 | x     | y      | true  |
| 거짓 같은 값 | 참 같은 값   | x     | y      | true  |
| 참 같은 값   | 거짓 같은 값 | y     | x      | false |
| 참 같은 값   | 참 같은 값   | y     | x      | false |



### 조건 연산자

- 자바스크립트의 유일한 삼항 연산자

```js
const result1 = true? 1 : 2; //1
const result2 = false? 1: 2; //2
```



### 쉼표 연산자

- for 문에서 표현식을 결합하거나, 여러작업을 한데 묶을 데 사용한다.

```js
let x = 0, y = 10, z;
z = (x++, y++); //10
```



### 비트 연산자

| 연산자          | 설명                               | 예제                      |
| --------------- | ---------------------------------- | ------------------------- |
| &               | 비트 AND 연산                      | 0b1010 & 0b1100 //0b1000  |
| \|              | 비트 OR 연산                       | 0b1010 \| 0b1100 //0b1110 |
| ^               | 비트 XOR 연산                      | 0b1010 ^ 0b1100 //0b0110  |
| ~               | 비트 NOT 연산                      | ~0b1010 //0b0101          |
| <<              | 왼쪽 시프트 연산                   | 0b1010 << 1 //0b10100     |
| &#62;&#62;      | 부호가 따라가는 오른쪽 시프트 연산 | 0b1010 >> 1 //0b101       |
| &#62;&#62;&#62; | 0으로 채우는 오른쪽 시프트 연산    | 0b1010 >>> 1 //0b101      |



### typeof 연산자

| 표현식               | 반환값    | 참고                            |
| -------------------- | --------- | ------------------------------- |
| typeof undefined     | undefined |                                 |
| typeof null          | object    | 주의! null을 object로 반환한다. |
| typeof {}            | object    |                                 |
| typeof true          | boolean   |                                 |
| typeof 1             | number    |                                 |
| typeof  ""           | string    |                                 |
| typeof Symbol()      | symbol    | ES6에서 도입됨                  |
| typeof function() {} | function  |                                 |



### void 연산자

- 거의 사용하지 않으므로 생략



### 할당 연산자

- 할당 자체도 표현식이며 값을 반환하므로 다시 할당할 수 있다.

| 연산자   | 동등한 표현 |
| -------- | ----------- |
| x = y    | x = y       |
| x += y   | x = x+y     |
| x -= y   | x = x-y     |
| x *= y   | x = x*y     |
| x /= y   | x = x/y     |
| x %= y   | x = x%y     |
| x <<= y  | x = x<<y    |
| x >>= y  | x = x>>y    |
| x >>>= y | x = x>>>y   |
| x &= y   | x = x&y     |
| x \|= y  | x = x\|y    |
| x ^= y   | x = x^y     |



### 해체 할당

- ES6에서 새로 도입하고 매우 환영받는 기능
- 객체 할당
  - 객체를 해체할 때는 반드시 변수 이름과 객체의 프로퍼티 이름이 일치 해야한다.
  - 객체 해체는 할당만으로 이뤄질 수도 있는데 그럴 경우 반드시 괄호를 써야한다.

```js
const obj = {b:2, c:3, d:4};
const {a,b,c,d} = obj;
a; //undefined
b; //2
c; //3
d; //4

const obj2 = {b:2, c:3, d:4};
let b,c,d;
{b,c,d} = obj2; //error
({b,c,d} = obj2;) //동작
```

- 배열 할당

  - 배열 요소에 대응할 변수 이름을 마음대로 쓸수 있으며 이들은 배열 순서대로 대응한다.
  - 확산 연산자 `...`  를 사용하면 남은 요소를 새 배열에 할당할 수 있다.
  - 배열 할당을 통해서 swap를 구현할 수 있다.

  ```js
  const arr = [1,2,3,4,5];
  let [x,y, ...rest] = arr;
  x; //1
  y; //2
  rest; //[3,4,5]
  
  let a=5, b=10;
  [a,b] = [b,a];
  a; //10
  b; //5
  ```

  

### 객체와 배열의 연산자

| 연산자     | 설명                          |
| ---------- | ----------------------------- |
| .          | 점 연산자                     |
| []         | 대괄호 연산자                 |
| in         | 프로퍼티 존재 연산자          |
| new        | 객체 인스턴스화 연산자        |
| instanceof | 프로토타입 체인 테스트 연산자 |
| ...        | 확산 연산자                   |
| delete     | 삭제 연산자                   |



### 템플릿 문자열



### 표현식과 흐름제어 패턴

- if...else 문을 3항 연산자로 바꾸기

```js
if(isPrime(n)) {
	label = 'prime'
} else {
	label = 'non-prime'
}

//다음과 같이 축약할 수 있다.

label = isPrime(n)? 'prime' : 'non-prime'
```

- if문을 단축 평가하는 OR 표현식으로 바꾸기

```js
if(!options) {options = {};}

//다음과 같이 축약할 수 있다. options이 없는 경우 default option을 설정할 수 있음.

options = options || {};
```

- 비트연산자를 통한 플래그 결합

```js
const FLAG_EXECUTE = 1; //0b001
const FLAG_WRITE = 2; //0b010
const FLAG_READ = 4; //0b100

const FLAG_EXECUTE_AND_WRITE = FLAG_EXECUTE & FLAG_WRITE;
const FLAG_WRITE_AND_READ = FLAG_WRITE & FLAG_READ;
```

